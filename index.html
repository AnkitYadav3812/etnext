<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ETNext â€” Smart News</title>

<link rel="icon" href="etnext-logo.png" type="image/png" />

<!-- Share Preview -->
<meta property="og:title" content="ETNext â€” Smart News" />
<meta property="og:description" content="Latest breaking news powered by AI â€” Fast, Clean, Real-time." />
<meta property="og:image" content="https://ankityadav3812.github.io/etnext/etnext-logo.png" />
<meta property="og:url" content="https://ankityadav3812.github.io/etnext/" />
<meta property="og:type" content="website" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="ETNext â€” Smart News" />
<meta name="twitter:description" content="Latest breaking news powered by AI â€” Fast, Clean, Real-time." />
<meta name="twitter:image" content="https://ankityadav3812.github.io/etnext/etnext-logo.png" />

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f3f3f3;
}

header {
  background: #d32f2f;
  color: white;
  padding: 1rem 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 10;
}

header img {
  height: 45px;
  border-radius: 6px;
}

nav {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

nav button {
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  padding: 8px 14px;
  border-radius: 20px;
  cursor: pointer;
}

nav button.active,
nav button:hover {
  background: #ffffff;
  color: #d32f2f;
}

/* Trending Bar */
#trending-bar {
  background:white;
  padding:10px;
  overflow:hidden;
  white-space:nowrap;
  border-bottom:1px solid #ddd;
  font-weight:bold;
  color:#d32f2f;
}

.search-container {
  max-width: 600px;
  margin: 1rem auto;
  display: flex;
  gap: 10px;
  padding: 0 10px;
}

.search-bar {
  flex: 1;
  padding: 10px 15px;
  border-radius: 25px;
  border: 1px solid #ccc;
  font-size: 1rem;
}

.voice-btn {
  width: 45px;
  height: 45px;
  background: #d32f2f;
  color: white;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  font-size: 1.2rem;
}

main {
  max-width: 1100px;
  margin: 1rem auto;
  padding: 0 1rem;
}

.news-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.news-card {
  background: white;
  padding: 1rem;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

.news-card h3 {
  margin: 0 0 8px 0;
}

footer {
  text-align: center;
  background: #111;
  color: #aaa;
  padding: 1.2rem;
  margin-top: 2rem;
  font-size: 0.9rem;
}
</style>

</head>

<body>

<header>
  <img src="etnext-logo.png" alt="ETNext Logo" />
  <nav id="nav"></nav>
</header>

<!-- TRENDING BAR -->
<div id="trending-bar">ðŸ”¥ Trending: Loading...</div>

<div class="search-container">
  <input id="search-input" class="search-bar" placeholder="Search news... (e.g. AI, Elections)" />
  <button id="voice-btn" class="voice-btn">ðŸŽ¤</button>
</div>

<main>
  <div id="content">Loading news...</div>
</main>

<footer>Â© 2025 ETNext â€” Smart News</footer>

<script>
// ================================
//  NEWS CATEGORIES
// ================================
const categories = [
  { name: "ðŸŒ World", q: "world" },
  { name: "ðŸ’¼ Business", q: "business" },
  { name: "âš™ï¸ Tech", q: "technology" },
  { name: "ðŸ Sports", q: "sports" },
  { name: "ðŸŽ¬ Entertainment", q: "entertainment" }
];

const nav = document.getElementById("nav");
const content = document.getElementById("content");
const trendingBar = document.getElementById("trending-bar");
let currentQuery = "world";

// CREATE CATEGORY BUTTONS
categories.forEach(c => {
  const btn = document.createElement("button");
  btn.textContent = c.name;
  btn.onclick = () => loadNewsAuto(c.q, btn);
  nav.appendChild(btn);
});

// MARK FIRST ACTIVE
nav.children[0].classList.add("active");

// ================================
//  FETCH RSS using SAFE PROXY
// ================================
async function fetchRSS(query) {
  const rssURL =
    "https://news.google.com/rss/search?q=" +
    encodeURIComponent(query) +
    "&hl=en-IN&gl=IN&ceid=IN:en";

  const proxyURL =
    "https://api.codetabs.com/v1/proxy?quest=" + encodeURIComponent(rssURL);

  const response = await fetch(proxyURL);
  const xmlText = await response.text();
  const xml = new DOMParser().parseFromString(xmlText, "text/xml");

  return Array.from(xml.querySelectorAll("item"));
}

// ================================
//  LOAD NEWS LIST (Text only)
// ================================
async function loadNews(query, btn) {
  content.innerHTML = "â³ Loading...";
  currentQuery = query;

  if (btn) {
    nav.querySelectorAll("button").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
  }

  try {
    const items = await fetchRSS(query);

    const list = document.createElement("div");
    list.className = "news-list";

    items.slice(0, 15).forEach(i => {
      const title = i.querySelector("title")?.textContent;
      const link = i.querySelector("link")?.textContent;
      const desc = i.querySelector("description")?.textContent || "";
      const cleanDesc = desc.replace(/<[^>]*>?/gm, "").slice(0, 200);

      const card = document.createElement("div");
      card.className = "news-card";
      card.innerHTML = `
        <h3>${title}</h3>
        <p>${cleanDesc}</p>
        <a href="${link}" target="_blank">Read more</a>
      `;
      list.appendChild(card);
    });

    content.innerHTML = "";
    content.appendChild(list);
  } catch (err) {
    content.innerHTML = "âš ï¸ Error loading news.";
  }
}

// Helper for auto refresh
function loadNewsAuto(query, btn) {
  loadNews(query, btn);
}

// LOAD DEFAULT NEWS
loadNews("world");

// ================================
//  TRENDING HEADLINES
// ================================
async function updateTrending() {
  try {
    const items = await fetchRSS("top news india");
    const titles = items.slice(0, 10).map(i => i.querySelector("title")?.textContent);
    trendingBar.textContent = "ðŸ”¥ Trending: " + titles.join(" â€¢ ");
  } catch {
    trendingBar.textContent = "ðŸ”¥ Trending: Unable to load.";
  }
}

updateTrending();
setInterval(updateTrending, 180000); // 3 minutes

// ================================
//  AUTO REFRESH NEWS
// ================================
setInterval(() => {
  loadNews(currentQuery);
}, 300000); // 5 minutes

// ================================
//  SEARCH BAR
// ================================
document.getElementById("search-input").addEventListener("keypress", e => {
  if (e.key === "Enter") {
    const q = e.target.value.trim();
    if (q) loadNews(q);
  }
});

// ================================
//  VOICE SEARCH
// ================================
if ("webkitSpeechRecognition" in window || "SpeechRecognition" in window) {
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  const rec = new SR();
  rec.lang = "en-IN";

  document.getElementById("voice-btn").onclick = () => rec.start();

  rec.onresult = e => {
    const q = e.results[0][0].transcript;
    document.getElementById("search-input").value = q;
    loadNews(q);
  };
}
</script>

</body>
</html>
