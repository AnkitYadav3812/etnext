<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ETNext ‚Äî Smart News</title>
<link rel="icon" href="etnext-logo.png" type="image/png" />

<!-- Share Preview -->
<meta property="og:title" content="ETNext ‚Äî Smart News" />
<meta property="og:description" content="Breaking news, trending stories, and smart updates ‚Äî fast and clean." />
<meta property="og:image" content="https://ankityadav3812.github.io/etnext/etnext-logo.png" />
<meta property="og:url" content="https://ankityadav3812.github.io/etnext/" />

<style>
:root {
  --primary: #d32f2f;
  --accent: #ffffff;
  --foreground: #111;
  --radius: 10px;
}
.dark {
  --accent: #101010;
  --foreground: #fff;
}
body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  background: var(--accent);
  color: var(--foreground);
  transition: 0.3s ease;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: var(--primary);
  color: #fff;
}
header img { height: 45px; }

nav {
  display: flex;
  gap: 10px;
}
nav button {
  background: rgba(255,255,255,0.15);
  border: none;
  padding: 6px 14px;
  border-radius: 20px;
  color: #fff;
}
nav button.active, nav button:hover {
  background: #fff;
  color: var(--primary);
}

.search-container {
  max-width: 650px;
  margin: 1.5rem auto;
  display: flex;
  gap: 8px;
}
.search-bar {
  flex: 1;
  padding: 0.8rem 1rem;
  border-radius: 25px;
  border: 1px solid #ccc;
}
.voice-btn {
  background: var(--primary);
  color: #fff;
  border: none;
  width: 45px; height: 45px;
  border-radius: 50%;
  cursor: pointer;
}

.ticker {
  background: #fff;
  color: #111;
  padding: 0.7rem;
  border-top: 1px solid #ddd;
  border-bottom: 1px solid #ddd;
  overflow: hidden;
  white-space: nowrap;
}
.ticker-content {
  display: inline-block;
  animation: slide 20s linear infinite;
}
@keyframes slide {
  from { transform: translateX(100%); }
  to   { transform: translateX(-100%); }
}

main {
  max-width: 1100px;
  padding: 1rem;
  margin: auto;
}
.news-item {
  background: #fff;
  margin-bottom: 1rem;
  padding: 1rem;
  border-radius: var(--radius);
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.dark .news-item { background: #181818; }

footer {
  margin-top: 2rem;
  padding: 1rem;
  text-align: center;
  background: #000;
  color: #eee;
  font-size: 0.9rem;
}

.theme-toggle {
  position: fixed;
  right: 1.5rem;
  bottom: 1.5rem;
  width: 50px; height: 50px;
  border-radius: 50%;
  border: none;
  background: var(--primary);
  color: #fff;
  font-size: 1.4rem;
  cursor: pointer;
}

.breaking-popup {
  position: fixed;
  left: 1rem;
  bottom: 1rem;
  background: #ffecec;
  border-left: 6px solid #d32f2f;
  padding: 12px 16px;
  border-radius: 10px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  display: none;
  z-index: 999;
}
</style>
</head>

<body>

<header>
  <img src="etnext-logo.png" alt="ETNext" />
  <nav id="nav"></nav>
</header>

<div class="ticker"><span id="ticker-content">Loading headlines...</span></div>

<div class="search-container">
  <input id="search-input" class="search-bar" placeholder="Search news..." />
  <button id="voice-btn" class="voice-btn">üé§</button>
</div>

<main>
  <div id="content">Loading...</div>
</main>

<footer>¬© 2025 ETNext ‚Äî Smart News</footer>

<button class="theme-toggle" id="theme-toggle">üåô</button>

<div class="breaking-popup" id="breaking-popup"></div>


<script>
const CATEGORIES = [
  { name: "üåç World", url: "https://news.google.com/rss?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üíº Business", url: "https://news.google.com/rss/headlines/section/topic/BUSINESS?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üõ† Tech", url: "https://news.google.com/rss/headlines/section/topic/TECHNOLOGY?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üèè Sports", url: "https://news.google.com/rss/headlines/section/topic/SPORTS?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üé¨ Entertainment", url: "https://news.google.com/rss/headlines/section/topic/ENTERTAINMENT?hl=en-IN&gl=IN&ceid=IN:en" }
];

const nav = document.getElementById("nav");
const content = document.getElementById("content");
const ticker = document.getElementById("ticker-content");
const breakingBox = document.getElementById("breaking-popup");

CATEGORIES.forEach((cat, i) => {
  const b = document.createElement("button");
  b.textContent = cat.name;
  b.onclick = () => loadNews(i);
  if (i === 0) b.classList.add("active");
  nav.appendChild(b);
});

async function fetchRSS(url) {
  const api = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`;
  const res = await fetch(api);
  return await res.json();
}

async function loadNews(index) {
  nav.querySelectorAll("button").forEach(b => b.classList.remove("active"));
  nav.children[index].classList.add("active");

  content.innerHTML = "Loading...";

  try {
    const data = await fetchRSS(CATEGORIES[index].url);
    const items = data.items;

    content.innerHTML = "";
    items.slice(0, 12).forEach(item => {
      const text = item.description.replace(/<[^>]+>/g, "").slice(0, 180);
      const div = document.createElement("div");
      div.className = "news-item";
      div.innerHTML = `<h3>${item.title}</h3><p>${text}...</p><a href="${item.link}" target="_blank">Read more</a>`;
      content.appendChild(div);
    });
  } catch (e) {
    content.innerHTML = "‚ö†Ô∏è Error loading news.";
  }
}

loadNews(0);

async function updateTicker() {
  try {
    const data = await fetchRSS(CATEGORIES[0].url);
    const titles = data.items.slice(0, 10).map(i => i.title);
    ticker.textContent = "üî• " + titles.join(" ‚Ä¢ ");

    breakingBox.textContent = titles[0];
    breakingBox.style.display = "block";
    setTimeout(() => (breakingBox.style.display = "none"), 6000);
  } catch {
    ticker.textContent = "‚ö†Ô∏è Failed to load headlines.";
  }
}

updateTicker();
setInterval(updateTicker, 1000 * 60 * 10);

document.getElementById("theme-toggle").onclick = () => {
  document.body.classList.toggle("dark");
};

document.getElementById("search-input").addEventListener("keypress", e => {
  if (e.key === "Enter") {
    const q = e.target.value;
    if (!q) return;
    loadNewsSearch(q);
  }
});

async function loadNewsSearch(q) {
  content.innerHTML = "Searching...";

  const url = `https://news.google.com/rss/search?q=${encodeURIComponent(q)}&hl=en-IN&gl=IN&ceid=IN:en`;

  try {
    const data = await fetchRSS(url);
    content.innerHTML = "";
    data.items.slice(0, 12).forEach(i => {
      const text = i.description.replace(/<[^>]+>/g,"").slice(0,180);
      const div = document.createElement("div");
      div.className = "news-item";
      div.innerHTML = `<h3>${i.title}</h3><p>${text}</p><a href="${i.link}" target="_blank">Read more</a>`;
      content.appendChild(div);
    });
  } catch {
    content.innerHTML = "‚ö†Ô∏è Error during search.";
  }
}
</script>

</body>
</html>
