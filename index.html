<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ETNext ‚Äî Smart News & Weather</title>
<link rel="icon" href="etnext-logo.png" type="image/png" />

<!-- ‚úÖ Share Preview -->
<meta property="og:title" content="ETNext ‚Äî Smart News & Weather" />
<meta property="og:description" content="AI-powered breaking news, live weather, and trending updates ‚Äî all in one place." />
<meta property="og:image" content="https://ankityadav3812.github.io/etnext/etnext-logo.png" />
<meta property="og:url" content="https://ankityadav3812.github.io/etnext/" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="ETNext ‚Äî Smart News & Weather" />
<meta name="twitter:description" content="AI-powered breaking news and weather updates." />
<meta name="twitter:image" content="https://ankityadav3812.github.io/etnext/etnext-logo.png" />
<meta name="theme-color" content="#d32f2f" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

<style>
:root {
  --primary: #d32f2f;
  --accent: #f6f6f8;
  --foreground: #111;
  --radius: 0.625rem;
}
.dark {
  --primary: #ef5350;
  --accent: #1e1e1e;
  --foreground: #fff;
}
body {
  margin: 0;
  background: var(--accent);
  color: var(--foreground);
  font-family: "Poppins", sans-serif;
  transition: 0.3s ease;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: var(--primary);
  color: #fff;
  position: sticky;
  top: 0;
  z-index: 10;
}
header img {
  height: 45px;
  border-radius: 6px;
}
nav {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}
nav button {
  background: rgba(255,255,255,0.1);
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 25px;
  color: #fff;
  cursor: pointer;
}
nav button:hover, nav button.active {
  background: #fff;
  color: var(--primary);
}
.search-container {
  max-width: 600px;
  margin: 1.5rem auto;
  display: flex;
  gap: 0.5rem;
}
.search-bar {
  flex: 1;
  padding: 0.75rem 1rem;
  border: 1px solid #ccc;
  border-radius: 25px;
  font-size: 1rem;
}
.voice-btn {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  border: none;
  background: var(--primary);
  color: #fff;
  font-size: 1.3rem;
  cursor: pointer;
}
.ticker {
  background: #fff;
  color: #111;
  padding: 0.6rem 1rem;
  overflow: hidden;
  white-space: nowrap;
  border-bottom: 1px solid #ddd;
}
.ticker-content {
  display: inline-block;
  animation: scroll 90s linear infinite; /* üê¢ Slower speed */
}
.ticker:hover .ticker-content {
  animation-play-state: paused; /* ‚è∏Ô∏è Pause on hover */
}
@keyframes scroll {
  from { transform: translateX(100%); }
  to { transform: translateX(-100%); }
}
main {
  max-width: 1200px;
  margin: 1.5rem auto;
  padding: 0 1rem;
}
.news-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
}
.news-card {
  background: #fff;
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  transition: 0.3s;
}
.news-card:hover {
  transform: translateY(-3px);
}
.news-card img {
  width: 100%;
  height: 200px;
  object-fit: cover;
}
.news-card .content {
  padding: 1rem;
}
.news-card h3 {
  margin: 0.5rem 0;
  font-size: 1.1rem;
}
.news-card p {
  font-size: 0.9rem;
  color: #555;
}
.read-more {
  display: inline-block;
  margin-top: 0.5rem;
  padding: 0.4rem 0.9rem;
  background: var(--primary);
  color: #fff;
  border-radius: 20px;
  font-size: 0.8rem;
  text-decoration: none;
}
footer {
  background: #111;
  color: #ddd;
  padding: 3rem 2rem;
  margin-top: 2rem;
  text-align: center;
}
.theme-toggle {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  background: var(--primary);
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  font-size: 1.4rem;
  cursor: pointer;
}
#weather-widget {
  position: fixed;
  bottom: 85px;
  right: 1.5rem;
  background: #fff;
  color: #111;
  padding: 1rem;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  text-align: center;
  min-width: 170px;
  z-index: 50;
}
.breaking-popup {
  position: fixed;
  left: 1rem;
  bottom: 1rem;
  background: linear-gradient(90deg,#ffe6e6,#fff1f1);
  border-left: 6px solid #d32f2f;
  padding: 12px 16px;
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(0,0,0,.15);
  z-index: 9999;
  display: flex;
  gap: 12px;
  align-items: center;
  min-width: 260px;
  max-width: 360px;
  transform: translateY(20px);
  opacity: 0;
  transition: transform .25s ease, opacity .25s ease;
}
.breaking-popup.show { transform: translateY(0); opacity: 1; }
.breaking-popup .dot { width:12px; height:12px; background:#d32f2f; border-radius:50%; box-shadow:0 0 8px rgba(211,47,47,.6); }
.breaking-popup .txt { font-size: 0.95rem; color:#111; line-height:1.1; }
.breaking-popup .title { font-weight:700; margin-bottom:6px; font-size:0.95rem; }
.breaking-popup .close { margin-left:auto; background:transparent; border:none; font-size:1rem; cursor:pointer; color:#555; }
@media (max-width:520px){
  .breaking-popup { left: .6rem; right: .6rem; min-width: auto; max-width:calc(100% - 1.2rem); }
}
</style>
</head>

<body>
<header>
  <img src="etnext-logo.png" alt="ETNext Logo" />
  <nav id="nav"></nav>
</header>

<div class="ticker"><div class="ticker-content" id="ticker-content">Breaking News: Loading...</div></div>

<div class="search-container">
  <input id="search-input" class="search-bar" placeholder="Search news... (e.g. AI, Elections, Sports)" />
  <button id="voice-btn" class="voice-btn">üé§</button>
</div>

<main><div id="content">ü§ñ Loading...</div></main>

<footer>¬© 2025 ETNext ‚Äî Smart News & Weather</footer>

<button class="theme-toggle" id="theme-toggle">üåô</button>
<div id="weather-widget">üå§ Loading...</div>

<div id="breakingPopup" class="breaking-popup">
  <div class="dot"></div>
  <div class="txt">
    <div class="title" id="breakingTitle">Breaking Now</div>
    <div id="breakingText">Loading latest headline...</div>
  </div>
  <button class="close" id="breakingClose">‚úï</button>
</div>

<script>
const categories = [
  { name: "üåç World", url: "https://news.google.com/rss?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üíº Business", url: "https://news.google.com/rss/headlines/section/topic/BUSINESS?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "‚öôÔ∏è Tech", url: "https://news.google.com/rss/headlines/section/topic/TECHNOLOGY?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üèè Sports", url: "https://news.google.com/rss/headlines/section/topic/SPORTS?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üé¨ Entertainment", url: "https://news.google.com/rss/headlines/section/topic/ENTERTAINMENT?hl=en-IN&gl=IN&ceid=IN:en" }
];

const nav = document.getElementById("nav");
const content = document.getElementById("content");
const ticker = document.getElementById("ticker-content");
const popup = document.getElementById("breakingPopup");
const popupTitle = document.getElementById("breakingTitle");
const popupText = document.getElementById("breakingText");
const popupClose = document.getElementById("breakingClose");

categories.forEach(cat => {
  const b = document.createElement("button");
  b.textContent = cat.name;
  b.onclick = () => loadNews(cat.url);
  nav.appendChild(b);
});

async function fetchRSS(url) {
  const res = await fetch("https://thingproxy.freeboard.io/fetch/" + url);
  const data = await res.text();
  const xml = new DOMParser().parseFromString(data, "text/xml");
  return Array.from(xml.querySelectorAll("item"));
}

async function loadNews(url) {
  content.innerHTML = "‚è≥ Loading...";
  try {
    const items = await fetchRSS(url);
    const grid = document.createElement("div");
    grid.className = "news-grid";
    items.slice(0, 10).forEach(item => {
      const title = item.querySelector("title")?.textContent;
      const link = item.querySelector("link")?.textContent;
      const desc = item.querySelector("description")?.textContent || "";

      // üñº Improved image extraction
      let img = "";
      const media = item.getElementsByTagName("media:content")[0];
      const enclosure = item.getElementsByTagName("enclosure")[0];
      const thumb = item.getElementsByTagName("media:thumbnail")[0];
      const imgMatch = desc.match(/<img[^>]+src="([^">]+)"/);
      if (media && media.getAttribute("url")) img = media.getAttribute("url");
      else if (enclosure && enclosure.getAttribute("url")) img = enclosure.getAttribute("url");
      else if (thumb && thumb.getAttribute("url")) img = thumb.getAttribute("url");
      else if (imgMatch) img = imgMatch[1];
      else img = "https://via.placeholder.com/400x200?text=ETNext+News";

      const text = desc.replace(/<[^>]*>?/gm, '').slice(0,150);
      const card = document.createElement("div");
      card.className = "news-card";
      card.innerHTML = `<img src="${img}" alt="News Image" loading="lazy" onerror="this.src='https://via.placeholder.com/400x200?text=ETNext+News'">
      <div class="content"><h3>${title}</h3><p>${text}</p><a href="${link}" target="_blank" class="read-more">Read More</a></div>`;
      grid.appendChild(card);
    });
    content.innerHTML = "";
    content.appendChild(grid);
  } catch {
    content.innerHTML = "‚ö†Ô∏è Error loading news.";
  }
}

// Weather, popup, and other features remain same (already working)
</script>
</body>
</html>
