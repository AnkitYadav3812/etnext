<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ETNext ‚Äî Smart News</title>

<link rel="icon" href="etnext-logo.png" type="image/png" />

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f5f6fa;
}

/* HEADER */
header {
  background: #d32f2f;
  padding: 15px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
header img { height: 45px; }

/* CATEGORY BUTTONS */
nav {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
nav button {
  background: #ffffffaa;
  border: none;
  padding: 8px 14px;
  border-radius: 20px;
  cursor: pointer;
}
nav button.active {
  background: #fff;
  color: #d32f2f;
}

/* SEARCH BAR */
.search-box {
  max-width: 600px;
  margin: 25px auto;
  display: flex;
  gap: 10px;
}
.search-box input {
  flex: 1;
  padding: 10px 15px;
  border-radius: 25px;
  border: 1px solid #ccc;
  font-size: 16px;
}

/* NEWS LIST */
.news-list {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}
.news-item {
  background: #fff;
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 15px;
  border-left: 4px solid #d32f2f;
}
.news-item h3 { margin: 0; }
.news-item a { color: #d32f2f; }

/* TRENDING */
#trendingBox {
  background: #fff;
  padding: 12px;
  margin: 10px auto;
  max-width: 900px;
  border-left: 4px solid orange;
  border-radius: 6px;
  font-size: 15px;
}

/* FOOTER */
footer {
  background: #111;
  color: #fff;
  padding: 20px;
  margin-top: 40px;
  text-align: center;
}
</style>
</head>

<body>

<header>
  <img src="etnext-logo.png" alt="Logo" />
  <nav id="nav"></nav>
</header>

<div id="trendingBox">üî• Trending: Loading...</div>

<div class="search-box">
  <input id="searchInput" placeholder="Search news...">
</div>

<div class="news-list" id="newsContainer">Loading...</div>

<footer>¬© 2025 ETNext ‚Äî Smart News</footer>

<script>
// CATEGORIES
const categories = [
  { name: "üåç World", url: "https://news.google.com/rss?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üáÆüá≥ India", url: "https://news.google.com/rss/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRGRqTVhZU0FtVnVHZ0pLV0FBUAE?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üíº Business", url: "https://news.google.com/rss/headlines/section/topic/BUSINESS?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "‚öôÔ∏è Technology", url: "https://news.google.com/rss/headlines/section/topic/TECHNOLOGY?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üé¨ Entertainment", url: "https://news.google.com/rss/headlines/section/topic/ENTERTAINMENT?hl=en-IN&gl=IN&ceid=IN:en" },
  { name: "üèè Sports", url: "https://news.google.com/rss/headlines/section/topic/SPORTS?hl=en-IN&gl=IN&ceid=IN:en" }
];

const nav = document.getElementById("nav");
const newsContainer = document.getElementById("newsContainer");
const trendingBox = document.getElementById("trendingBox");

// Create buttons
categories.forEach((cat, i) => {
  const btn = document.createElement("button");
  btn.textContent = cat.name;
  btn.onclick = () => loadNews(i);
  nav.appendChild(btn);
});

// Working RSS fetch
async function fetchRSS(url) {
  const api = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(url);
  const res = await fetch(api);
  return await res.json();
}

// Load news
async function loadNews(index) {
  nav.querySelectorAll("button").forEach(b => b.classList.remove("active"));
  nav.children[index].classList.add("active");

  newsContainer.innerHTML = "Loading...";

  try {
    const data = await fetchRSS(categories[index].url);
    const articles = data.items;

    if (!articles) {
      newsContainer.innerHTML = "‚ö†Ô∏è Error loading news.";
      return;
    }

    newsContainer.innerHTML = "";

    articles.forEach(n => {
      const cleanText = n.description.replace(/<[^>]*>/g, "").slice(0, 250);
      newsContainer.innerHTML += `
        <div class="news-item">
          <h3>${n.title}</h3>
          <p>${cleanText}</p>
          <a href="${n.link}" target="_blank">Read more ‚Üí</a>
        </div>
      `;
    });
  }
  catch {
    newsContainer.innerHTML = "‚ö†Ô∏è Error loading news.";
  }
}

// Trending (auto refresh)
async function loadTrending() {
  try {
    const data = await fetchRSS(categories[0].url);
    trendingBox.textContent = "üî• Trending: " + data.items[0].title;
  } catch {
    trendingBox.textContent = "üî• Trending: Unable to load.";
  }
}

setInterval(loadTrending, 30000); // every 30 seconds

// Search news
document.getElementById("searchInput").addEventListener("keypress", e => {
  if (e.key === "Enter") {
    const q = e.target.value;
    if (q.trim() !== "") {
      loadCustomSearch(q);
    }
  }
});

async function loadCustomSearch(query) {
  newsContainer.innerHTML = "Searching...";

  const url = "https://news.google.com/rss/search?q=" +
               encodeURIComponent(query) +
              "&hl=en-IN&gl=IN&ceid=IN:en";

  try {
    const data = await fetchRSS(url);
    const articles = data.items;

    newsContainer.innerHTML = "";

    articles.forEach(n => {
      const cleanText = n.description.replace(/<[^>]*>/g, "").slice(0, 250);
      newsContainer.innerHTML += `
        <div class="news-item">
          <h3>${n.title}</h3>
          <p>${cleanText}</p>
          <a href="${n.link}" target="_blank">Read more ‚Üí</a>
        </div>
      `;
    });

  } catch {
    newsContainer.innerHTML = "‚ö†Ô∏è Error loading news.";
  }
}

// Load default
loadNews(0);
loadTrending();
</script>

</body>
</html>
